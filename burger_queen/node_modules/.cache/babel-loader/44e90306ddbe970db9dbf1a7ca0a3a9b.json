{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\LIM017-burger-queen\\\\burger_queen\\\\src\\\\firebase\\\\context.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useEffect, useState } from 'react';\nimport { signInWithEmailAndPassword, addDoc, setDoc, collection, doc, query, orderBy, onSnapshot, signOut } from './index.js';\nimport { auth, db } from './config'; // Archivo que permite saber a las otras páginas que el usuario se ha logueado\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext(); // Inicio sesión\n\nexport const AuthProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [orders, setOrders] = useState([]);\n\n  const login = (email, password) => {\n    return signInWithEmailAndPassword(auth, email, password).then(userCredential => userCredential).catch(error => error.message);\n  }; // Cierre de sesión\n\n\n  const logOut = () => {\n    return signOut(auth).then(() => {\n      alert('Cierre de sesión con éxito');\n    }).catch(error => {\n      alert(error.message);\n    });\n  }; // Guardar pedidos en colección creada \"order\"\n\n\n  const saveOrder = order => {\n    return addDoc(collection(db, 'orders'), { ...order\n    });\n  };\n\n  useEffect(() => {\n    const ordersDataBase = collection(db, 'orders');\n    const q = query(ordersDataBase, orderBy(\"date\", \"desc\"));\n    const getOrders = onSnapshot(q, snapshot => setOrders(snapshot.docs.map(doc => ({ ...doc.data(),\n      id: doc.id\n    }))));\n    return getOrders;\n  }, []); // Actualiza colección de db en firestore\n\n  const updateDataBase = (id, state) => {\n    setDoc(doc(db, \"orders\", id), {\n      state: state\n    }, {\n      merge: true\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      login,\n      logOut,\n      saveOrder,\n      orders,\n      updateDataBase\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AuthProvider, \"FvMuVccH6DXI6fqfhJiN/VsjZaw=\");\n\n_c = AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useState","signInWithEmailAndPassword","addDoc","setDoc","collection","doc","query","orderBy","onSnapshot","signOut","auth","db","AuthContext","AuthProvider","children","orders","setOrders","login","email","password","then","userCredential","catch","error","message","logOut","alert","saveOrder","order","ordersDataBase","q","getOrders","snapshot","docs","map","data","id","updateDataBase","state","merge"],"sources":["C:/Users/USER/Desktop/LIM017-burger-queen/burger_queen/src/firebase/context.js"],"sourcesContent":["import React, {createContext, useEffect, useState } from 'react'\r\nimport { signInWithEmailAndPassword, addDoc, setDoc, collection, doc, query, orderBy, onSnapshot, signOut } from './index.js';\r\nimport { auth, db } from './config';\r\n\r\n// Archivo que permite saber a las otras páginas que el usuario se ha logueado\r\nexport const AuthContext = createContext();\r\n\r\n // Inicio sesión\r\nexport const AuthProvider = ({ children }) => {\r\n  \r\n  const [orders, setOrders] = useState([]);\r\n\r\n  const login = (email, password) => {\r\n  return signInWithEmailAndPassword(auth, email, password)\r\n  .then((userCredential) => userCredential)\r\n  .catch((error) => error.message)\r\n};\r\n\r\n  // Cierre de sesión\r\n  const logOut = () => {\r\n  return signOut(auth)\r\n  .then(() => {alert ('Cierre de sesión con éxito')})\r\n  .catch((error) => {alert (error.message)});\r\n};\r\n\r\n // Guardar pedidos en colección creada \"order\"\r\n  const saveOrder = (order) => {\r\n  return addDoc(collection(db, 'orders'), {...order})\r\n};\r\n  \r\n  useEffect(() => {\r\n    const ordersDataBase = collection(db, 'orders');\r\n    const q = query(ordersDataBase, orderBy(\"date\", \"desc\"));\r\n    const getOrders = onSnapshot(q, (snapshot) => setOrders(snapshot.docs.map((doc) => ({...doc.data(), id: doc.id })))   );\r\n    return getOrders;\r\n}, []);\r\n\r\n// Actualiza colección de db en firestore\r\nconst updateDataBase = (id, state) => { setDoc(doc(db, \"orders\",id), {state: state}, {merge:true})}\r\n\r\nreturn (<AuthContext.Provider value={{ login, logOut, saveOrder, orders, updateDataBase}}>{children}</AuthContext.Provider>)\r\n\r\n};"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,aAAf,EAA8BC,SAA9B,EAAyCC,QAAzC,QAAyD,OAAzD;AACA,SAASC,0BAAT,EAAqCC,MAArC,EAA6CC,MAA7C,EAAqDC,UAArD,EAAiEC,GAAjE,EAAsEC,KAAtE,EAA6EC,OAA7E,EAAsFC,UAAtF,EAAkGC,OAAlG,QAAiH,YAAjH;AACA,SAASC,IAAT,EAAeC,EAAf,QAAyB,UAAzB,C,CAEA;;;AACA,OAAO,MAAMC,WAAW,gBAAGd,aAAa,EAAjC,C,CAEN;;AACD,OAAO,MAAMe,YAAY,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EAE5C,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBhB,QAAQ,CAAC,EAAD,CAApC;;EAEA,MAAMiB,KAAK,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB;IACnC,OAAOlB,0BAA0B,CAACS,IAAD,EAAOQ,KAAP,EAAcC,QAAd,CAA1B,CACNC,IADM,CACAC,cAAD,IAAoBA,cADnB,EAENC,KAFM,CAECC,KAAD,IAAWA,KAAK,CAACC,OAFjB,CAAP;EAGD,CAJC,CAJ4C,CAU5C;;;EACA,MAAMC,MAAM,GAAG,MAAM;IACrB,OAAOhB,OAAO,CAACC,IAAD,CAAP,CACNU,IADM,CACD,MAAM;MAACM,KAAK,CAAE,4BAAF,CAAL;IAAqC,CAD3C,EAENJ,KAFM,CAECC,KAAD,IAAW;MAACG,KAAK,CAAEH,KAAK,CAACC,OAAR,CAAL;IAAsB,CAFlC,CAAP;EAGD,CAJC,CAX4C,CAiB7C;;;EACC,MAAMG,SAAS,GAAIC,KAAD,IAAW;IAC7B,OAAO1B,MAAM,CAACE,UAAU,CAACO,EAAD,EAAK,QAAL,CAAX,EAA2B,EAAC,GAAGiB;IAAJ,CAA3B,CAAb;EACD,CAFC;;EAIA7B,SAAS,CAAC,MAAM;IACd,MAAM8B,cAAc,GAAGzB,UAAU,CAACO,EAAD,EAAK,QAAL,CAAjC;IACA,MAAMmB,CAAC,GAAGxB,KAAK,CAACuB,cAAD,EAAiBtB,OAAO,CAAC,MAAD,EAAS,MAAT,CAAxB,CAAf;IACA,MAAMwB,SAAS,GAAGvB,UAAU,CAACsB,CAAD,EAAKE,QAAD,IAAchB,SAAS,CAACgB,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAmB7B,GAAD,KAAU,EAAC,GAAGA,GAAG,CAAC8B,IAAJ,EAAJ;MAAgBC,EAAE,EAAE/B,GAAG,CAAC+B;IAAxB,CAAV,CAAlB,CAAD,CAA3B,CAA5B;IACA,OAAOL,SAAP;EACH,CALU,EAKR,EALQ,CAAT,CAtB4C,CA6B9C;;EACA,MAAMM,cAAc,GAAG,CAACD,EAAD,EAAKE,KAAL,KAAe;IAAEnC,MAAM,CAACE,GAAG,CAACM,EAAD,EAAK,QAAL,EAAcyB,EAAd,CAAJ,EAAuB;MAACE,KAAK,EAAEA;IAAR,CAAvB,EAAuC;MAACC,KAAK,EAAC;IAAP,CAAvC,CAAN;EAA2D,CAAnG;;EAEA,oBAAQ,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAAEtB,KAAF;MAASQ,MAAT;MAAiBE,SAAjB;MAA4BZ,MAA5B;MAAoCsB;IAApC,CAA7B;IAAA,UAAmFvB;EAAnF;IAAA;IAAA;IAAA;EAAA,QAAR;AAEC,CAlCM;;GAAMD,Y;;KAAAA,Y"},"metadata":{},"sourceType":"module"}