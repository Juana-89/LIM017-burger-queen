{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\LIM017-burger-queen\\\\burger_queen\\\\src\\\\context\\\\CartContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useState } from \"react\";\n/* Creamos el context, se le puede pasar un valor inicial */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n\n  /* Creamos un estado para el carrito */\n  const [cartItems, setCartItems] = useState(() => {\n    try {\n      const productosEnLocalStorage = localStorage.getItem(\"cartProducts\");\n      return productosEnLocalStorage ? JSON.parse(productosEnLocalStorage) : [];\n    } catch (error) {\n      return [];\n    }\n  });\n  useEffect(() => {\n    localStorage.setItem(\"cartProducts\", JSON.stringify(cartItems));\n    console.log(cartItems);\n  }, [cartItems]);\n\n  const addItemToCart = product => {\n    const inCart = cartItems.find(productInCart => productInCart.id === product.id);\n\n    if (inCart) {\n      setCartItems(cartItems.map(productInCart => {\n        if (productInCart.id === product.id) {\n          return { ...inCart,\n            amount: inCart.amount + 1\n          };\n        } else return productInCart;\n      }));\n    } else {\n      setCartItems([...cartItems, { ...product,\n        amount: 1\n      }]);\n    }\n  };\n\n  const deleteItemToCart = product => {\n    const inCart = cartItems.find(productInCart => productInCart.id === product.id);\n\n    if (inCart.amount === 1) {\n      setCartItems(cartItems.filter(productInCart => productInCart.id !== product.id));\n    } else {\n      setCartItems(cartItems.map(productInCart => {\n        if (productInCart.id === product.id) {\n          return { ...inCart,\n            amount: inCart.amount - 1\n          };\n        } else return productInCart;\n      }));\n    }\n  };\n\n  return (\n    /*#__PURE__*/\n\n    /* Envolvemos el children con el provider y le pasamos un objeto con las propiedades que necesitamos por value */\n    _jsxDEV(CartContext.Provider, {\n      value: {\n        cartItems,\n        addItemToCart,\n        deleteItemToCart\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }, this)\n  );\n};\n\n_s(CartProvider, \"iIO/2DBnTZyNG8a5Zs+/4K/d9vI=\");\n\n_c = CartProvider;\nexport default CartContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useEffect","useState","CartContext","CartProvider","children","cartItems","setCartItems","productosEnLocalStorage","localStorage","getItem","JSON","parse","error","setItem","stringify","console","log","addItemToCart","product","inCart","find","productInCart","id","map","amount","deleteItemToCart","filter"],"sources":["C:/Users/USER/Desktop/LIM017-burger-queen/burger_queen/src/context/CartContext.js"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\r\n/* Creamos el context, se le puede pasar un valor inicial */\r\nexport const CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  /* Creamos un estado para el carrito */\r\n  const [cartItems, setCartItems] = useState(() => {\r\n  try {\r\n    const productosEnLocalStorage = localStorage.getItem(\"cartProducts\");\r\n    return productosEnLocalStorage ? JSON.parse(productosEnLocalStorage) :[]\r\n  } catch (error) {\r\n    return []\r\n  }\r\n});\r\n\r\nuseEffect(() => {\r\n  localStorage.setItem(\"cartProducts\", JSON.stringify(cartItems))\r\n  console.log(cartItems);\r\n}, [cartItems]);\r\n\r\n  const addItemToCart = (product) => {\r\n   const inCart = cartItems.find(\r\n    (productInCart) => productInCart.id === product.id\r\n    );\r\n  \r\n  if(inCart) {\r\n    setCartItems(\r\n      cartItems.map((productInCart) => {\r\n        if (productInCart.id === product.id) {\r\n          return { ...inCart, amount: inCart.amount + 1 }\r\n        } else return productInCart;\r\n       })\r\n    )\r\n       } else {\r\n          setCartItems([...cartItems, { ...product, amount:1}])\r\n        }\r\n  }\r\n  const deleteItemToCart = (product) => {\r\n    const inCart = cartItems.find(\r\n      (productInCart) => productInCart.id === product.id\r\n      );\r\n\r\n  if(inCart.amount === 1) {\r\n    setCartItems(\r\n      cartItems.filter((productInCart) => productInCart.id !== product.id) \r\n    );\r\n  }else {\r\n    setCartItems(\r\n      cartItems.map((productInCart) => {\r\n        if (productInCart.id === product.id) {\r\n          return {...inCart, amount: inCart.amount - 1}\r\n          } else return productInCart\r\n        })\r\n    )\r\n  }\r\n};\r\n\r\n  return (\r\n    /* Envolvemos el children con el provider y le pasamos un objeto con las propiedades que necesitamos por value */\r\n    <CartContext.Provider\r\n      value={{ cartItems, addItemToCart, deleteItemToCart }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\nexport default CartContext;\r\n"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,SAAxB,EAAmCC,QAAnC,QAAmD,OAAnD;AACA;;;AACA,OAAO,MAAMC,WAAW,gBAAGH,aAAa,EAAjC;AAEP,OAAO,MAAMI,YAAY,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;;EAC5C;EACA,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BL,QAAQ,CAAC,MAAM;IACjD,IAAI;MACF,MAAMM,uBAAuB,GAAGC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAhC;MACA,OAAOF,uBAAuB,GAAGG,IAAI,CAACC,KAAL,CAAWJ,uBAAX,CAAH,GAAwC,EAAtE;IACD,CAHD,CAGE,OAAOK,KAAP,EAAc;MACd,OAAO,EAAP;IACD;EACF,CAP2C,CAA1C;EASFZ,SAAS,CAAC,MAAM;IACdQ,YAAY,CAACK,OAAb,CAAqB,cAArB,EAAqCH,IAAI,CAACI,SAAL,CAAeT,SAAf,CAArC;IACAU,OAAO,CAACC,GAAR,CAAYX,SAAZ;EACD,CAHQ,EAGN,CAACA,SAAD,CAHM,CAAT;;EAKE,MAAMY,aAAa,GAAIC,OAAD,IAAa;IAClC,MAAMC,MAAM,GAAGd,SAAS,CAACe,IAAV,CACbC,aAAD,IAAmBA,aAAa,CAACC,EAAd,KAAqBJ,OAAO,CAACI,EADlC,CAAf;;IAID,IAAGH,MAAH,EAAW;MACTb,YAAY,CACVD,SAAS,CAACkB,GAAV,CAAeF,aAAD,IAAmB;QAC/B,IAAIA,aAAa,CAACC,EAAd,KAAqBJ,OAAO,CAACI,EAAjC,EAAqC;UACnC,OAAO,EAAE,GAAGH,MAAL;YAAaK,MAAM,EAAEL,MAAM,CAACK,MAAP,GAAgB;UAArC,CAAP;QACD,CAFD,MAEO,OAAOH,aAAP;MACP,CAJF,CADU,CAAZ;IAOI,CARN,MAQY;MACJf,YAAY,CAAC,CAAC,GAAGD,SAAJ,EAAe,EAAE,GAAGa,OAAL;QAAcM,MAAM,EAAC;MAArB,CAAf,CAAD,CAAZ;IACD;EACN,CAhBD;;EAiBA,MAAMC,gBAAgB,GAAIP,OAAD,IAAa;IACpC,MAAMC,MAAM,GAAGd,SAAS,CAACe,IAAV,CACZC,aAAD,IAAmBA,aAAa,CAACC,EAAd,KAAqBJ,OAAO,CAACI,EADnC,CAAf;;IAIF,IAAGH,MAAM,CAACK,MAAP,KAAkB,CAArB,EAAwB;MACtBlB,YAAY,CACVD,SAAS,CAACqB,MAAV,CAAkBL,aAAD,IAAmBA,aAAa,CAACC,EAAd,KAAqBJ,OAAO,CAACI,EAAjE,CADU,CAAZ;IAGD,CAJD,MAIM;MACJhB,YAAY,CACVD,SAAS,CAACkB,GAAV,CAAeF,aAAD,IAAmB;QAC/B,IAAIA,aAAa,CAACC,EAAd,KAAqBJ,OAAO,CAACI,EAAjC,EAAqC;UACnC,OAAO,EAAC,GAAGH,MAAJ;YAAYK,MAAM,EAAEL,MAAM,CAACK,MAAP,GAAgB;UAApC,CAAP;QACC,CAFH,MAES,OAAOH,aAAP;MACR,CAJH,CADU,CAAZ;IAOD;EACF,CAlBC;;EAoBA;IAAA;;IACE;IACA,QAAC,WAAD,CAAa,QAAb;MACE,KAAK,EAAE;QAAEhB,SAAF;QAAaY,aAAb;QAA4BQ;MAA5B,CADT;MAAA,UAGGrB;IAHH;MAAA;MAAA;MAAA;IAAA;EAFF;AAQD,CA7DM;;GAAMD,Y;;KAAAA,Y;AA8Db,eAAeD,WAAf"},"metadata":{},"sourceType":"module"}