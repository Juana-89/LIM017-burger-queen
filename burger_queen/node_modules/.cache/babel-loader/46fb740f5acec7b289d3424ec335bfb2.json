{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\LIM017-burger-queen\\\\burger_queen\\\\src\\\\components\\\\WaiterView2\\\\context.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { collection, addDoc } from \"firebase/firestore\";\nimport { db } from \"../firebase\"; //creamos un contexto que es igual al estado global\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Context = /*#__PURE__*/React.createContext();\n\nconst Provider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  //estado para obtener el nombre del cliente y mesa\n  const [client, changeClient] = useState(\"\");\n  const [table, changeTable] = useState(\"\"); //estado para añadir productos al pedido\n\n  const [products, setProducts] = useState([]); //Función para añadir productos al carro y aumentar cantidad\n\n  const onAdd = product => {\n    const exist = products.find(item => item.id === product.id);\n\n    if (exist) {\n      setProducts(products.map(item => item.id === product.id ? { ...exist,\n        qty: exist.qty + 1\n      } : item));\n    } else {\n      setProducts([...products, { ...product,\n        qty: 1\n      }]);\n    }\n  }; //Función para restar cantidad\n\n\n  const onRemove = product => {\n    const exist = products.find(item => item.id === product.id);\n\n    if (exist.qty === 1) {\n      setProducts(products.filter(item => item.id !== product.id));\n    } else {\n      setProducts(products.map(item => item.id === product.id ? { ...exist,\n        qty: exist.qty - 1\n      } : item));\n    }\n  }; //Función para eliminar productos\n\n\n  const removeProducts = product => {\n    const exist = products.find(item => item.id === product.id);\n\n    if (exist.qty) {\n      setProducts(products.filter(item => item.id !== product.id));\n    }\n  }; //Función para el total\n\n\n  const itemsPrice = products.reduce((a, c) => {\n    return a + c.price * c.qty;\n  }, 0); //Función para guardar orden de cliente a Firestore\n\n  const resumeOrder = async () => {\n    try {\n      await addDoc(collection(db, \"Orders\"), {\n        client: client,\n        table: table,\n        total: itemsPrice,\n        order: products,\n        date: new Date(),\n        status: \"Pendiente\"\n      });\n    } catch (error) {\n      throw new Error(\"Error al guardar el pedido\");\n    }\n  };\n\n  const props = {\n    client,\n    changeClient,\n    table,\n    changeTable,\n    onAdd,\n    onRemove,\n    products,\n    setProducts,\n    removeProducts,\n    itemsPrice,\n    resumeOrder\n  };\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: props,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 10\n  }, this);\n};\n\n_s(Provider, \"U9M0MpfgpJpRLjVO05Jn49rd6Eg=\");\n\n_c = Provider;\nexport { Context, Provider };\n\nvar _c;\n\n$RefreshReg$(_c, \"Provider\");","map":{"version":3,"names":["React","useState","collection","addDoc","db","Context","createContext","Provider","children","client","changeClient","table","changeTable","products","setProducts","onAdd","product","exist","find","item","id","map","qty","onRemove","filter","removeProducts","itemsPrice","reduce","a","c","price","resumeOrder","total","order","date","Date","status","error","Error","props"],"sources":["C:/Users/USER/Desktop/LIM017-burger-queen/burger_queen/src/components/WaiterView2/context.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { collection, addDoc} from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\n//creamos un contexto que es igual al estado global\r\nconst Context = React.createContext();\r\n\r\nconst Provider = ({ children }) => {\r\n  //estado para obtener el nombre del cliente y mesa\r\n  const [client, changeClient] = useState(\"\");\r\n  const [table, changeTable] = useState(\"\");\r\n\r\n  //estado para añadir productos al pedido\r\n  const [products, setProducts] = useState([]);\r\n\r\n  //Función para añadir productos al carro y aumentar cantidad\r\n  const onAdd = (product) => {\r\n    const exist = products.find((item) => item.id === product.id);\r\n    if (exist) {\r\n      setProducts(\r\n        products.map((item) =>\r\n          item.id === product.id ? { ...exist, qty: exist.qty + 1 } : item\r\n        )\r\n      );\r\n    } else {\r\n      setProducts([...products, { ...product, qty: 1 }]);\r\n    }\r\n  };\r\n\r\n  //Función para restar cantidad\r\n  const onRemove = (product) => {\r\n    const exist = products.find((item) => item.id === product.id);\r\n    if (exist.qty === 1) {\r\n      setProducts(products.filter((item) => item.id !== product.id));\r\n    } else {\r\n      setProducts(\r\n        products.map((item) =>\r\n          item.id === product.id ? { ...exist, qty: exist.qty - 1 } : item\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  //Función para eliminar productos\r\n  const removeProducts = (product) => {\r\n    const exist = products.find((item) => item.id === product.id);\r\n    if (exist.qty) {\r\n      setProducts(products.filter((item) => item.id !== product.id));\r\n    }\r\n  };\r\n\r\n  //Función para el total\r\n  const itemsPrice = products.reduce((a, c) => {\r\n    return a + c.price * c.qty;\r\n  }, 0);\r\n\r\n  //Función para guardar orden de cliente a Firestore\r\n  const resumeOrder = async () => {\r\n    try {\r\n      await addDoc(collection(db, \"Orders\"), {\r\n        client: client,\r\n        table: table,\r\n        total: itemsPrice,\r\n        order: products,\r\n        date: new Date(),\r\n        status: \"Pendiente\",\r\n      });\r\n    } catch (error) {\r\n      throw new Error(\"Error al guardar el pedido\");\r\n    }\r\n  };\r\n\r\n  const props = {\r\n    client,\r\n    changeClient,\r\n    table,\r\n    changeTable,\r\n    onAdd,\r\n    onRemove,\r\n    products,\r\n    setProducts,\r\n    removeProducts,\r\n    itemsPrice,\r\n    resumeOrder\r\n  };\r\n\r\n  return <Context.Provider value={props}>{children}</Context.Provider>;\r\n};\r\n\r\nexport { Context, Provider };"],"mappings":"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"},"metadata":{},"sourceType":"module"}